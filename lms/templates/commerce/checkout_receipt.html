{% extends "main_django.html" %}

{% load i18n %}
{% load microsite %}
{% load staticfiles %}
{% load util_extras %}


{% block title %}
    {% captureas title %}{% trans "Receipt" %}{% endcaptureas %}
    <title>{% page_title_breadcrumbs title %}</title>
{% endblock %}

{% block bodyclass %}register verification-process step-requirements{% endblock %}

{% block bodyextra %}
    <script src="{% static 'js/src/tooltip_manager.js' %}"></script>
{% endblock %}

{% block body %}
    {# Note: Much of this HTML structure is unnecessary and only here to copy the styles of the old receipt page in the verify_student app. #}
    <div class="container">
        <section class="wrapper carousel">
            <div id="pay-and-verify-container" class="pay-and-verify">
                <div class="wrapper-content-main payment-confirmation-step">
                    <article class="content-main">
                        <h3 class="title">
                            {% captureas course_name %}
                                <span class="course-title">{{ course_name }}</span>
                            {% endcaptureas %}
                            {% blocktrans %}
                                Thank you! We have received your payment for {{ course_name }}.
                            {% endblocktrans %}
                        </h3>

                        <ul class="list-info">
                            <li class="info-item payment-info">
                                <div class="copy">
                                    <p>{% trans "Please print this page for your records; it serves as your receipt. You will also receive an email with the same information." %}</p>
                                </div>

                                <div class="wrapper-report">
                                    <table class="report report-receipt">
                                        <thead>
                                        <tr>
                                            <th scope="col">{% trans "Order No." %}</th>
                                            <th scope="col">{% trans "Description" %}</th>
                                            <th scope="col">{% trans "Date" %}</th>
                                            <th scope="col">{% trans "Amount" %}</th>
                                        </tr>
                                        </thead>

                                        <tbody>
                                        {% for line in order.lines %}
                                            <tr>
                                                <td>{{ order.number }}</td>
                                                <td>{{ line.description }}</td>
                                                <td>{{ order.date_placed }}</td>
                                                <td>{{ line.line_price_excl_tax }} ({{ order.currency|upper }})</td>
                                            </tr>
                                        {% endfor %}
                                        </tbody>

                                        <tfoot>
                                        <tr>
                                            <th scope="row" class="total-label" colspan="1">{% trans "Total" %}</th>
                                            <td class="total-value" colspan="3">
                                                <span class="value-amount">{{ order.total_excl_tax }}</span>
                                                <span class="value-currency">({{ order.currency|upper }})</span>
                                            </td>
                                        </tr>
                                        </tfoot>
                                    </table>
                                </div>

                                <div class="copy">
                                    <p>{% trans "Billed to" %}:
                                        <span class="name-first">{{ order.billing_address.first_name }}</span>
                                        <span class="name-last">{{ order.billing_address.last_name }}</span>
                                        (<span class="address-city">{{ order.billing_address.city }}</span>,
                                        <span class="address-state">{{ order.billing_address.state }}</span>
                                        <span class="address-postalcode">{{ order.billing_address.postal_code }}</span>
                                        <span class="address-country">{{ order.billing_address.country|upper }}</span>)
                                    </p>
                                </div>
                            </li>
                        </ul>


                        <nav class="nav-wizard is-ready">
                            <a id="verify_later_button" class="next action-secondary verify-later nav-link"
                               href="{% url dashboard %}"
                               data-tooltip="{% blocktrans %}If you don't verify your identity now, you can still explore your course from your dashboard. You will receive periodic reminders from {{ platform_name }} to verify your identity.{% endblocktrans %}">
                                {% trans "Want to confirm your identity later?" %}
                            </a>

                            <a id="verify_now_button" class="next action-primary right"
                               href="{% url verify_student_verify_now course_id=course_id %}">
                                {% trans "Verify Now" %}
                            </a>
                        </nav>
                    </article>
                </div>
            </div>
        </section>
    </div>
{% endblock %}
